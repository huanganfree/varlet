import{d as B,a as W,b as I,w as z,_ as P,p as h,D as J,E as X,f as y,h as x,M as m,N as p,O as d,P as j,Q as q,i as w,j as N,R as V,q as k,S as g,m as O,G as nn,T as en,r as E,V as on,W as tn,Y as an,Z as D,C as sn,as as rn}from"./vue-router-547718df.js";import{p as v,L as ln}from"./index-f194146b.js";import{I as cn}from"./index-6ea553c6.js";import{u as dn}from"./zIndex-d095b494.js";import{p as b,d as f,o as un,c as U,a as c,g as pn,m as fn,w as _}from"./logger-9a144f5d.js";import{u as mn}from"./lock-783c0ea8.js";import{c as gn}from"./index-89a3ce91.js";const G={type:String,position:{type:String,default:"top"},content:{type:[String,Function,Object]},contentClass:String,duration:{type:Number,default:3e3},vertical:Boolean,loadingType:b(v,"type"),loadingSize:b(v,"size"),loadingRadius:b(v,"radius"),loadingColor:{...b(v,"color"),default:"currentColor"},lockScroll:Boolean,show:Boolean,teleport:{type:[String,Object,Boolean],default:"body"},forbidClick:Boolean,onOpen:f(),onOpened:f(),onClose:f(),onClosed:f(),"onUpdate:show":f(),_update:String},{n:vn,classes:bn}=U("snackbar"),yn={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},kn=B({name:"VarSnackbarCore",components:{VarLoading:ln,VarIcon:cn},props:G,setup(n){const o=W(null),{zIndex:e}=dn(()=>n.show,1);mn(()=>n.show,()=>n.lockScroll);const s=I(()=>n.type==="loading"||n.forbidClick),t=I(()=>n.type?yn[n.type]:""),r=()=>{o.value=setTimeout(()=>{n.type!=="loading"&&c(n["onUpdate:show"],!1)},n.duration)};return z(()=>n.show,l=>{l?(c(n.onOpen),r()):l===!1&&(clearTimeout(o.value),c(n.onClose))}),z(()=>n._update,()=>{clearTimeout(o.value),r()}),un(()=>{n.show&&(c(n.onOpen),r())}),{SNACKBAR_TYPE:R,n:vn,classes:bn,zIndex:e,iconName:t,isForbidClick:s}}});function Sn(n,o,e,s,t,r){const l=h("var-icon"),S=h("var-loading");return J((y(),x("div",{class:p(n.n()),style:V({pointerEvents:n.isForbidClick?"auto":"none",zIndex:n.zIndex})},[m("div",{class:p(n.classes(n.n("wrapper"),n.n(`wrapper-${n.position}`),n.n("$-elevation--4"),[n.vertical,n.n("vertical")],[n.type&&n.SNACKBAR_TYPE.includes(n.type),n.n(`wrapper-${n.type}`)])),style:V({zIndex:n.zIndex})},[m("div",{class:p([n.n("content"),n.contentClass])},[d(n.$slots,"default",{},()=>[j(q(n.content),1)])],2),m("div",{class:p([n.n("icon")])},[n.iconName?(y(),w(l,{key:0,name:n.iconName},null,8,["name"])):N("",!0),n.type==="loading"?(y(),w(S,{key:1,type:n.loadingType,size:n.loadingSize,color:n.loadingColor,radius:n.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),d(n.$slots,"icon")],2),m("div",{class:p(n.n("action"))},[d(n.$slots,"action")],2)],6)],6)),[[X,n.show]])}const M=P(kn,[["render",Sn]]),{n:Cn}=U("snackbar"),hn=B({name:"VarSnackbar",components:{VarSnackbarCore:M},props:G,setup(){const{disabled:n}=pn();return{n:Cn,disabled:n}}});function wn(n,o,e,s,t,r){const l=h("var-snackbar-core");return y(),w(en,{to:n.teleport===!1?void 0:n.teleport,disabled:n.disabled||n.teleport===!1},[k(nn,{name:`${n.n()}-fade`,onAfterEnter:n.onOpened,onAfterLeave:n.onClosed},{default:g(()=>[k(l,O(n.$props,{class:n.n("transition")}),{icon:g(()=>[d(n.$slots,"icon")]),action:g(()=>[d(n.$slots,"action")]),default:g(()=>[d(n.$slots,"default",{},()=>[j(q(n.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const A=P(hn,[["render",wn]]);function On(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!sn(n)}const R=["loading","success","warning","info","error"];let L=0,$=!1,F,u=!1;const Y={type:void 0,content:"",icon:"",action:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=E([]),T=Y;const $n={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},C=n=>()=>rn(n)?n():n,En={setup(){return()=>{const n=a.map(({id:o,reactiveSnackOptions:e,_update:s})=>{const t=document.querySelector(".var-transition-group");e.forbidClick||e.type==="loading"?t.classList.add("var-pointer-auto"):t.classList.remove("var-pointer-auto"),u&&(e.position="top");const l={position:u?"relative":"absolute",...Vn(e.position)},{content:S,icon:K,action:Z}=e,H={default:C(S),icon:C(K),action:C(Z)};return k(M,O(e,{key:o,style:l,"data-id":o,_update:s,show:e.show,"onUpdate:show":Q=>e.show=Q}),H)});return k(an,O($n,{style:{zIndex:gn.zIndex},onAfterEnter:An,onAfterLeave:Tn}),On(n)?n:{default:()=>[n]})}}},i=function(n){const o=zn(n),e=E({...T,...o});e.show=!0,$||($=!0,F=fn(En).unmountInstance);const{length:s}=a,t={id:L++,reactiveSnackOptions:e};if(s===0||u)In(t);else{const r=`update-${L}`;Nn(e,r)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:e.show=!1}}};R.forEach(n=>{i[n]=o=>(on(o)?o.type=n:o={content:o,type:n},i(o))});i.allowMultiple=function(n=!1){n!==u&&(a.forEach(o=>{o.reactiveSnackOptions.show=!1}),u=n)};i.clear=function(){a.forEach(n=>{n.reactiveSnackOptions.show=!1})};i.setDefaultOptions=function(n){T=n};i.resetDefaultOptions=function(){T=Y};function An(n){const o=n.getAttribute("data-id"),e=a.find(s=>s.id===D(o));e&&c(e.reactiveSnackOptions.onOpened)}function Tn(n){n.parentElement&&n.parentElement.classList.remove("var-pointer-auto");const o=n.getAttribute("data-id"),e=a.find(t=>t.id===D(o));e&&(e.animationEnd=!0,c(e.reactiveSnackOptions.onClosed)),a.every(t=>t.animationEnd)&&(c(F),a=E([]),$=!1)}function In(n){a.push(n)}function zn(n={}){return tn(n)?{content:n}:n}function Nn(n,o){const[e]=a;e.reactiveSnackOptions={...e.reactiveSnackOptions,...n},e._update=o}function Vn(n="top"){return n==="bottom"?{[n]:"5%"}:{top:n==="top"?"5%":"45%"}}i.Component=A;_(A);_(A,i);const _n=i;export{_n as S};
