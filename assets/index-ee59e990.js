import{F as Z,u as x}from"./provide-bd6f36e3.js";import{p as _,F as ee}from"./index-48091cb8.js";import{d as u,p as oe,h as ne,a as i,c as re,w as ae}from"./components-b4bea23d.js";import{d as le,aM as se,r as w,D as f,aN as z,at as ie,aO as de,n as te,a4 as ue,_ as me,b as D,e as g,m as C,q as T,aP as E,w as y,v as F,x as v,y as I,t as pe,aQ as he,aR as fe,M as ge}from"./index-ba2bae36.js";const Ce={modelValue:String,modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text"},textarea:Boolean,rows:{type:[String,Number],default:8},maxlength:[String,Number],readonly:Boolean,resize:Boolean,autofocus:Boolean,validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:Array,enterkeyhint:String,onFocus:u(),onBlur:u(),onInput:u(),onChange:u(),onClear:u(),"onUpdate:modelValue":u(),...oe(_,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])},{name:ye,n:ve,classes:be}=re("input"),ke=le({name:ye,components:{VarFormDetails:Z,VarFieldDecorator:ee},props:Ce,setup(e){const n=se(),m=w(null),p=w(!1),d=w(!1),{bindForm:V,form:l}=x(),{errorMessage:h,validateWithTrigger:r,validate:c,resetValidation:b}=ne(),N=f(()=>e.disabled||e.readonly?"":"text"),P=f(()=>e.type==="number"?"text":e.type),R=f(()=>{const{maxlength:o,modelValue:a}=e;return o?z(a)?`0 / ${o}`:`${String(a).length}/${o}`:""}),O=f(()=>{const{hint:o,blurColor:a,focusColor:s}=e;if(!o)return h.value?"var(--field-decorator-error-color)":p.value?s||"var(--field-decorator-focus-color)":a||"var(--field-decorator-placeholder-color, var(--field-decorator-blur-color))"});i(V,{reset:S,validate:$,resetValidation:b}),ie(()=>{e.autofocus&&k()});function t(o){te(()=>{const{validateTrigger:a,rules:s,modelValue:M}=e;r(a,o,s,M)})}function U(o){p.value=!0,i(e.onFocus,o),t("onFocus")}function A(o){p.value=!1,i(e.onBlur,o),t("onBlur")}function B(o){const a=o.target;let{value:s}=a;return e.type==="number"&&(s=H(s)),K(J(s))}function W(){d.value=!0}function j(o){d.value&&(d.value=!1,o.target.dispatchEvent(new Event("input")))}function q(o){if(d.value)return;const a=B(o);i(e["onUpdate:modelValue"],a),i(e.onInput,a,o),t("onInput")}function L(o){const a=B(o);i(e.onChange,a,o),t("onChange")}function Q(){const{disabled:o,readonly:a,clearable:s,onClear:M}=e;l!=null&&l.disabled.value||l!=null&&l.readonly.value||o||a||!s||(i(e["onUpdate:modelValue"],""),i(M,""),t("onClear"))}function G(o){const{disabled:a,onClick:s}=e;l!=null&&l.disabled.value||a||(i(s,o),t("onClick"))}function H(o){const a=o.indexOf("-"),s=o.indexOf(".");return a>-1&&(o=a===0?"-"+o.replace(/-/g,""):o.replace(/-/g,"")),s>-1&&(o=o.slice(0,s+1)+o.slice(s).replace(/\./g,"")),o.replace(/[^-0-9.]/g,"")}function J(o){return e.modelModifiers.trim?o.trim():o}function K(o){return e.maxlength?o.slice(0,ue(e.maxlength)):o}function X(o){const{disabled:a}=e;l!=null&&l.disabled.value||a||o.target===m.value||(k(),de(o))}function S(){i(e["onUpdate:modelValue"],""),b()}function $(){return c(e.rules,e.modelValue)}function k(){var o;(o=m.value)==null||o.focus()}function Y(){m.value.blur()}return{el:m,id:n,isFocus:p,isComposing:d,errorMessage:h,placeholderColor:O,normalizedType:P,cursor:N,maxlengthText:R,formDisabled:l==null?void 0:l.disabled,formReadonly:l==null?void 0:l.readonly,n:ve,classes:be,isEmpty:z,handleFocus:U,handleBlur:A,handleInput:q,handleChange:L,handleClear:Q,handleClick:G,handleCompositionStart:W,handleCompositionEnd:j,handleMousedown:X,validate:$,resetValidation:b,reset:S,focus:k,blur:Y}}});const Me=["placeholder","enterkeyhint"],we=["id","disabled","readonly","type","value","placeholder","maxlength","rows","enterkeyhint","inputmode"],Fe=["id","disabled","readonly","type","value","placeholder","maxlength","enterkeyhint","inputmode"];function Ie(e,n,m,p,d,V){const l=D("var-field-decorator"),h=D("var-form-details");return g(),C("div",{class:v(e.classes(e.n(),e.n("$--box"))),onMousedown:n[13]||(n[13]=(...r)=>e.handleMousedown&&e.handleMousedown(...r))},[T(l,he(fe({value:e.modelValue,id:e.id,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocus:e.isFocus,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,cursor:e.cursor,composing:e.isComposing,onClick:e.handleClick,onClear:e.handleClear})),E({"append-icon":y(()=>[F(e.$slots,"append-icon")]),default:y(()=>[e.normalizedType==="password"?(g(),C("input",{key:0,tabindex:"-1",class:v(e.n("autocomplete")),placeholder:e.hint?void 0:e.placeholder,style:I({"--input-placeholder-color":e.placeholderColor}),enterkeyhint:e.enterkeyhint},null,14,Me)):pe("",!0),e.textarea?(g(),C("textarea",{key:1,class:v(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,rows:e.rows,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:I({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none","--input-placeholder-color":e.placeholderColor}),onFocus:n[0]||(n[0]=(...r)=>e.handleFocus&&e.handleFocus(...r)),onBlur:n[1]||(n[1]=(...r)=>e.handleBlur&&e.handleBlur(...r)),onInput:n[2]||(n[2]=(...r)=>e.handleInput&&e.handleInput(...r)),onChange:n[3]||(n[3]=(...r)=>e.handleChange&&e.handleChange(...r)),onCompositionstart:n[4]||(n[4]=(...r)=>e.handleCompositionStart&&e.handleCompositionStart(...r)),onCompositionend:n[5]||(n[5]=(...r)=>e.handleCompositionEnd&&e.handleCompositionEnd(...r))},`
      `,46,we)):(g(),C("input",{key:2,class:v(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:I({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,"--input-placeholder-color":e.placeholderColor}),onFocus:n[6]||(n[6]=(...r)=>e.handleFocus&&e.handleFocus(...r)),onBlur:n[7]||(n[7]=(...r)=>e.handleBlur&&e.handleBlur(...r)),onInput:n[8]||(n[8]=(...r)=>e.handleInput&&e.handleInput(...r)),onChange:n[9]||(n[9]=(...r)=>e.handleChange&&e.handleChange(...r)),onCompositionstart:n[10]||(n[10]=(...r)=>e.handleCompositionStart&&e.handleCompositionStart(...r)),onCompositionend:n[11]||(n[11]=(...r)=>e.handleCompositionEnd&&e.handleCompositionEnd(...r))},null,46,Fe))]),_:2},[e.$slots["prepend-icon"]?{name:"prepend-icon",fn:y(()=>[F(e.$slots,"prepend-icon")]),key:"0"}:void 0]),1040),T(h,{"error-message":e.errorMessage,"extra-message":e.maxlengthText,onMousedown:n[12]||(n[12]=ge(()=>{},["stop"]))},E({_:2},[e.$slots["extra-message"]?{name:"extra-message",fn:y(()=>[F(e.$slots,"extra-message")]),key:"0"}:void 0]),1032,["error-message","extra-message"])],34)}const Ve=me(ke,[["render",Ie]]);ae(Ve);export{Ve as I};
