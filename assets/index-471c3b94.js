import{p as C,I as J}from"./index-d9f34410.js";import{F as K,u as Q}from"./provide-bd6f36e3.js";import{v as Y}from"./index-85ab28c6.js";import{H as Z,u as x}from"./index-8c8e5e90.js";import{H as ee}from"./index-2a9d0a0e.js";import{p as S,d as F,h as ae,a as m,c as ne,w as re}from"./components-b4bea23d.js";import{a as P}from"./elements-75b8c791.js";import{d as oe,r as te,a4 as V,n as le,_ as se,b as N,L as U,e as I,m as H,p as ie,N as ce,O as de,P as me,y as $,x as u,q as k}from"./index-ba2bae36.js";const ue={modelValue:{type:Number,default:0},count:{type:[String,Number],default:5},color:String,icon:{type:String,default:"star"},emptyIcon:{type:String,default:"star-outline"},halfIcon:{type:String,default:"star-half-full"},namespace:S(C,"namespace"),emptyIconNamespace:S(C,"namespace"),halfIconNamespace:S(C,"namespace"),emptyColor:String,size:[String,Number],gap:[String,Number],half:Boolean,disabled:Boolean,disabledColor:String,readonly:Boolean,ripple:{type:Boolean,default:!0},clearable:Boolean,rules:Array,onChange:F(),"onUpdate:modelValue":F()},{name:pe,n:c}=ne("rate"),ve=oe({name:pe,components:{VarIcon:J,VarFormDetails:K,VarHoverOverlay:Z},directives:{Ripple:Y,Hover:ee},props:ue,setup(e){const p=te(-1),{form:a,bindForm:_}=Q(),{errorMessage:v,validateWithTrigger:B,validate:f,resetValidation:s}=ae(),{hovering:d}=x();let i=V(e.modelValue);m(_,{reset:D,validate:z,resetValidation:s});function o(n){const{count:r,gap:t}=e;return{color:y(n).color,marginRight:n!==V(r)?P(t):0}}function g(n){const{name:r,color:t}=y(n);return{[c("content")]:!0,[c("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[c("--error")]:v.value,[c("--primary")]:r!==e.emptyIcon&&!t}}function y(n){const{modelValue:r,disabled:t,disabledColor:l,color:h,half:T,emptyColor:W,icon:q,halfIcon:A,emptyIcon:E,namespace:X,halfIconNamespace:j,emptyIconNamespace:G}=e;let b=h;return(t||a!=null&&a.disabled.value)&&(b=l),n<=r?{color:b,name:q,namespace:X}:T&&n<=r+.5?{color:b,name:A,namespace:j}:{color:t||a!=null&&a.disabled.value?l:W,name:E,namespace:G}}function w(n,r){const{half:t,clearable:l}=e,{offsetWidth:h}=r.target;t&&r.offsetX<=Math.floor(h/2)&&(n-=.5),i===n&&l&&(n=0),i!==n&&(m(e["onUpdate:modelValue"],n),m(e.onChange,n)),i=n}function z(){return f(e.rules,e.modelValue)}function O(){return le(()=>B(["onChange"],"onChange",e.rules,e.modelValue))}function L(n,r){const{readonly:t,disabled:l}=e;t||l||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(w(n,r),O())}function M(n){return r=>{p.value=n,d.value=r}}function D(){m(e["onUpdate:modelValue"],0),s()}return{errorMessage:v,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,hovering:d,currentHoveringValue:p,getStyle:o,getClass:g,getCurrentState:y,handleClick:L,createHoverHandler:M,reset:D,validate:z,resetValidation:s,toSizeUnit:P,toNumber:V,n:c}}});const fe=["onClick"];function ge(e,p,a,_,v,B){const f=N("var-icon"),s=N("var-hover-overlay"),d=N("var-form-details"),i=U("ripple"),R=U("hover");return I(),H("div",{class:u(e.n("wrap"))},[ie("div",{class:u(e.n())},[(I(!0),H(ce,null,de(e.toNumber(e.count),o=>me((I(),H("div",{key:o,style:$(e.getStyle(o)),class:u(e.getClass(o)),onClick:g=>e.handleClick(o,g)},[k(f,{class:u(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.getCurrentState(o).namespace,name:e.getCurrentState(o).name,style:$({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),k(s,{hovering:e.hovering&&o===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,fe)),[[i,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[R,e.createHoverHandler(o),"desktop"]])),128))],2),k(d,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const ye=se(ve,[["render",ge]]);re(ye);export{ye as R};
