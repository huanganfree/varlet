import{r as m,aE as V,G as x,o as X,aF as Y,az as j,j as w,aG as q,aH as A,aI as E,ab as F}from"./index-ba2bae36.js";import{t as u}from"./elements-75b8c791.js";import{g as N,a as l}from"./components-b4bea23d.js";import{u as W}from"./zIndex-6555f30c.js";function K(t){const i=m(null),p=m(null),a=m({width:0,height:0}),r=N(t,"show",{passive:!0,defaultValue:!1,emit(s,n){n?(d(),l(t.onOpen)):l(t.onClose)}}),{zIndex:O}=W(()=>r.value,1);let f=null,g=!1,h=!1;const C=()=>{const{width:s,height:n}=F(i.value);a.value={width:u(s),height:u(n)}},P=()=>{switch(t.placement){case"top":case"cover-bottom":return"bottom";case"top-start":case"right-end":case"cover-bottom-start":return"bottom left";case"top-end":case"left-end":case"cover-bottom-end":return"bottom right";case"bottom":case"cover-top":return"top";case"bottom-start":case"right-start":case"cover-top-start":return"top left";case"bottom-end":case"left-start":case"cover-top-end":return"top right";case"left":case"cover-right":return"right";case"right":case"cover-left":return"left"}},H=()=>{t.trigger==="hover"&&(h=!0,v())},M=async()=>{t.trigger==="hover"&&(h=!1,await w(),!g&&c())},z=()=>{t.trigger==="hover"&&(g=!0)},S=async()=>{t.trigger==="hover"&&(g=!1,await w(),!h&&c())},I=()=>{t.closeOnClickReference&&r.value?c():v()},b=()=>{c()},R=s=>{t.trigger==="click"&&(b(),l(t.onClickOutside,s))},U=()=>{d(),l(t.onClosed)},G=()=>{const{offsetX:s,offsetY:n,placement:o}=t;C();const e={x:u(s),y:u(n)};switch(o){case"cover-top":return{placement:"bottom",skidding:e.x,distance:e.y-a.value.height};case"cover-top-start":return{placement:"bottom-start",skidding:e.x,distance:e.y-a.value.height};case"cover-top-end":return{placement:"bottom-end",skidding:e.x,distance:e.y-a.value.height};case"cover-bottom":return{placement:"top",skidding:e.x,distance:-e.y-a.value.height};case"cover-bottom-start":return{placement:"top-start",skidding:e.x,distance:-e.y-a.value.height};case"cover-bottom-end":return{placement:"top-end",skidding:e.x,distance:-e.y-a.value.height};case"cover-left":return{placement:"right",skidding:e.y,distance:e.x-a.value.width};case"cover-right":return{placement:"left",skidding:e.y,distance:-e.x-a.value.width};case"left":case"left-start":case"left-end":return{placement:o,skidding:e.y,distance:-e.x};case"top":case"top-start":case"top-end":return{placement:o,skidding:e.x,distance:-e.y};case"bottom":case"bottom-start":case"bottom-end":return{placement:o,skidding:e.x,distance:e.y};case"right":case"right-start":case"right-end":return{placement:o,skidding:e.y,distance:e.x}}},y=()=>{const{placement:s,skidding:n,distance:o}=G(),e=[{...q,enabled:r.value},{...A,options:{offset:[n,o]}},{...E,options:{adaptive:!1,gpuAcceleration:!1},enabled:r.value},{name:"applyTransformOrigin",enabled:r.value,phase:"beforeWrite",fn({state:T}){T.styles.popper.transformOrigin=P()}}];return{placement:s,modifiers:e,strategy:t.strategy}},k=()=>t.reference?i.value.querySelector(t.reference):i.value,d=()=>{f.setOptions(y())},v=()=>{const{disabled:s}=t;s||(r.value=!0,l(t["onUpdate:show"],!0))},c=()=>{r.value=!1,l(t["onUpdate:show"],!1)};return V(k,"click",R),x(()=>[t.offsetX,t.offsetY,t.placement,t.strategy],d),x(()=>t.disabled,c),X(()=>{f=Y(k()??i.value,p.value,y())}),j(()=>{f.destroy()}),{show:r,popover:p,zIndex:O,host:i,hostSize:a,handleHostClick:I,handleHostMouseenter:H,handleHostMouseleave:M,handlePopoverClose:b,handlePopoverMouseenter:z,handlePopoverMouseleave:S,handleClosed:U,resize:d,open:v,close:c}}export{K as u};
