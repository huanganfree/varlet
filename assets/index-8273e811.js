import{c as X,w as Y}from"./logger-9a144f5d.js";import{g as L}from"./elements-1fb47fa1.js";import{d as j,a as n,w as D,o as G,u as M,n as O,_ as V,f as y,h as $,O as U,i as E,M as o,D as F,E as P,R as _,Q as s,j as I,N as W,T as A,aa as q,aC as H,p as Q,q as r,S as a,an as t,F as J,P as f,ak as K,al as Z}from"./vue-router-547718df.js";import{d as ee}from"./index-ea9abee8.js";import{u as te,b as x,_ as ae,c as re,a as oe}from"./index-d39e90ed.js";import{A as m}from"./appType-610d2e23.js";const ne={width:{type:Number,default:100},height:{type:Number,default:100},content:String,image:String,rotate:{type:Number,default:-22},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},gapX:{type:Number,default:0},gapY:{type:Number,default:0},zIndex:{type:[Number,String],default:10},opacity:{type:[Number,String],default:.5},fullscreen:Boolean,font:{type:Object,default:()=>({fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:14})}},{n:se,classes:le}=X("watermark"),fe=j({name:"VarWatermark",props:ne,setup(e,{slots:g}){const l=n(""),h=n(""),p=n(""),w=n(null),v=n(null),C=()=>!!(g.content||e.content&&!e.image),z=async()=>new Promise(S=>{const k=document.createElement("canvas"),T=k.getContext("2d"),c=new Image;c.crossOrigin="anonymous",c.referrerPolicy="no-referrer",c.src=e.image,c.onload=()=>{k.width=c.width,k.height=c.height,T.drawImage(c,0,0),S(k.toDataURL())}}),N=S=>{const k=new Blob([S],{type:"image/svg+xml"});return URL.createObjectURL(k)},b=()=>{l.value&&URL.revokeObjectURL(l.value)},R=async()=>{p.value=L(v.value).color,e.image&&(h.value=await z()),await O(),b(),l.value=N(w.value.innerHTML)};return D(()=>[e.image,e.font,e.content,e.height,e.width,e.rotate,e.gapX,e.gapY,e.offsetX,e.offsetY,e.opacity],R,{deep:!0}),G(R),M(b),{n:se,classes:le,svgRef:w,containerRef:v,watermarkUrl:l,imageUrl:h,textColor:p,showContent:C,resize:R}}});const ie={ref:"svgRef"},ue=["viewBox","width","height"],ce=["width","height"],me=["href","xlink:href","x","y","width","height"];function de(e,g,l,h,p,w){return y(),$("div",{class:W(e.n())},[U(e.$slots,"default"),(y(),E(A,{to:"body",disabled:!e.fullscreen},[o("div",{ref:"containerRef",class:W(e.classes(e.n("container"),[e.fullscreen,e.n("--fullscreen")])),style:_({backgroundImage:`url(${e.watermarkUrl})`,zIndex:e.zIndex})},[F(o("div",ie,[(y(),$("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`0 0 ${e.width+e.gapX} ${e.height+e.gapY}`,width:`${e.width+e.gapX}`,height:`${e.height+e.gapY}`,style:_({padding:`0 ${e.gapX}px ${e.gapY}px 0`,opacity:e.opacity})},[e.showContent()?(y(),$("foreignObject",{key:0,x:"0",y:"0",width:e.width,height:e.height},[o("div",{xmlns:"http://www.w3.org/1999/xhtml",style:_({transform:`translate(${e.offsetX}px, ${e.offsetY}px) rotate(${e.rotate}deg)`,transformOrigin:"center"})},[U(e.$slots,"content",{},()=>[o("span",{style:_({...e.font,fontSize:`${e.font.fontSize}px`,color:e.textColor})},s(e.content),5)])],4)],8,ce)):I("",!0),!e.$slots.content&&e.image?(y(),$("image",{key:1,href:e.imageUrl,"xlink:href":e.imageUrl,x:e.offsetX,y:e.offsetY,width:e.width,height:e.height,style:_({transform:`rotate(${e.rotate}deg)`,transformOrigin:"center"})},null,12,me)):I("",!0)],12,ue))],512),[[P,!1]])],6)],8,["disabled"]))],2)}const u=V(fe,[["render",de]]);Y(u);const ge={textWatermark:"文字水印",imageWatermark:"图片水印",customGap:"自定义间距",customOffset:"自定义偏移量",customRotate:"自定义旋转角度",fullscreen:"全屏",customContentSlot:"自定义水印内容",toggle:"切换"},he={textWatermark:"Text Watermark",imageWatermark:"Image Watermark",customGap:"Custom Gap",customOffset:"Custom Offset",customRotate:"Custom Rotate",fullscreen:"Fullscreen",customContentSlot:"Watermark Content Slot",toggle:"Toggle"},{add:B,use:pe,pack:i,packs:Ve,merge:xe}=te(),we=e=>{oe(e),pe(e)};x("zh-CN",ae);x("en-US",re);B("zh-CN",ge);B("en-US",he);const d=e=>(K("data-v-88c2d2e9"),e=e(),Z(),e),ke=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),ye=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),ve=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),_e=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),$e=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),be={class:"watermark-wrapper"},Ce=d(()=>o("div",{class:"watermark-wrapper"},null,-1)),Re=d(()=>o("span",{style:{"font-size":"20px",color:"#7986cb"}},"Varlet UI",-1)),Se={__name:"index",setup(e){const g=n(!1),l=n(null),h=n(null),p=n(null),w=n(null),v=n(null),C=()=>{g.value=!g.value};return q(we),H(ee,()=>{O(()=>{l.value.resize(),h.value.resize(),p.value.resize(),w.value.resize(),v.value.resize()})}),(z,N)=>{const b=Q("var-button");return y(),$(J,null,[r(t(m),null,{default:a(()=>[f(s(t(i).textWatermark),1)]),_:1}),r(t(u),{content:"Varlet",ref_key:"watermarkRef",ref:l},{default:a(()=>[ke]),_:1},512),r(t(m),null,{default:a(()=>[f(s(t(i).customGap),1)]),_:1}),r(t(u),{content:"Varlet","gap-x":40,"gap-y":40,ref_key:"watermarkRef2",ref:h},{default:a(()=>[ye]),_:1},512),r(t(m),null,{default:a(()=>[f(s(t(i).customOffset),1)]),_:1}),r(t(u),{content:"Varlet","offset-x":20,"offset-y":20,ref_key:"watermarkRef3",ref:p},{default:a(()=>[ve]),_:1},512),r(t(m),null,{default:a(()=>[f(s(t(i).customRotate),1)]),_:1}),r(t(u),{content:"Varlet",rotate:22,"offset-y":20,ref_key:"watermarkRef4",ref:w},{default:a(()=>[_e]),_:1},512),r(t(m),null,{default:a(()=>[f(s(t(i).imageWatermark),1)]),_:1}),r(t(u),{image:"./logo.svg",width:40,height:40,"gap-x":40,"gap-y":40,"offset-x":10,"offset-y":10},{default:a(()=>[$e]),_:1}),r(t(m),null,{default:a(()=>[f(s(t(i).fullscreen),1)]),_:1}),r(t(u),{ref_key:"watermarkRef5",ref:v,content:"Varlet UI",fullscreen:g.value,"z-index":"99","offset-x":10,"offset-y":10},{default:a(()=>[o("div",be,[r(b,{type:"primary",onClick:C},{default:a(()=>[f(s(t(i).toggle),1)]),_:1})])]),_:1},8,["fullscreen"]),r(t(m),null,{default:a(()=>[f(s(t(i).customContentSlot),1)]),_:1}),r(t(u),{"offset-x":10,"offset-y":10},{content:a(()=>[Re]),default:a(()=>[Ce]),_:1})],64)}}},Be=V(Se,[["__scopeId","data-v-88c2d2e9"]]);export{Be as default};
