import{I as ye}from"./index-d9f34410.js";import{M as ge}from"./index-e8396a52.js";import{C as ke}from"./index-5ce9467e.js";import{p as Ve,F as Se}from"./index-48091cb8.js";import{F as $e,u as we}from"./provide-bd6f36e3.js";import{a1 as Me,d as _,r as F,D as v,aN as G,G as x,a2 as Pe,n as Fe,_ as ee,b as y,e as c,m as f,q as O,w as k,p as D,x as r,v as S,aQ as Oe,aR as Be,aP as De,y as H,N as J,O as Ne,f as le,M as A,Q as Ee,R as B,t as K,a3 as Te,L as X,P as He}from"./index-ba2bae36.js";import{d as V,p as Ie,h as Le,a as d,c as oe,w as ae}from"./components-b4bea23d.js";import{t as Z}from"./elements-75b8c791.js";import{e as ne}from"./logger-525ef361.js";import{u as ze}from"./useSelectController-09b06437.js";import{C as Re}from"./index-e690b14c.js";import{v as Ue}from"./index-85ab28c6.js";import{H as Ye}from"./index-2a9d0a0e.js";import{H as Ae,u as Ke}from"./index-8c8e5e90.js";const Qe={modelValue:{default:void 0},multiple:Boolean,offsetY:{type:[String,Number],default:0},chip:Boolean,readonly:Boolean,separator:{type:String,default:","},textAlign:{type:String,default:"left"},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:Array,onFocus:V(),onBlur:V(),onClose:V(),onChange:V(),onClear:V(),"onUpdate:modelValue":V(),...Ie(Ve,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])},se=Symbol("SELECT_BIND_OPTION_KEY");function We(){const{length:e,childProviders:o,bindChildren:i}=Me(se);return{length:e,options:o,bindOptions:i}}const{name:je,n:qe,classes:Ge}=oe("select"),Je=_({name:je,components:{VarIcon:ye,VarMenu:ge,VarChip:ke,VarFieldDecorator:Se,VarFormDetails:$e},props:Qe,setup(e){const o=F(!1),i=F(!1),$=v(()=>e.multiple),w=v(()=>e.focusColor),M=v(()=>G(e.modelValue)),b=v(()=>e.disabled||e.readonly?"":"pointer"),u=F(0),{bindForm:h,form:l}=we(),{length:m,options:t,bindOptions:I}=We(),{label:N,labels:L,computeLabel:E,getSelectedValue:z}=ze({modelValue:()=>e.modelValue,multiple:()=>e.multiple,optionProviders:()=>t,optionProvidersLength:()=>m.value}),{errorMessage:T,validateWithTrigger:re,validate:ie,resetValidation:R}=Le(),te=F(null),de=v(()=>e.variant==="outlined"?"bottom":"cover-top"),ue=v(()=>{const{hint:a,blurColor:n,focusColor:s}=e;if(!a)return T.value?"var(--field-decorator-error-color)":o.value?s||"var(--field-decorator-focus-color)":n||"var(--field-decorator-placeholder-color, var(--field-decorator-blur-color))"}),ce=v(()=>!e.hint&&G(e.modelValue)),Q={multiple:$,focusColor:w,computeLabel:E,onSelect:pe,reset:j,validate:W,resetValidation:R};x(()=>e.multiple,()=>{const{multiple:a,modelValue:n}=e;a&&!Pe(n)&&ne("Select","The modelValue must be an array when multiple is true")}),I(Q),d(h,Q);function g(a){Fe(()=>{const{validateTrigger:n,rules:s,modelValue:C}=e;re(n,a,s,C)})}function ve(){const{disabled:a,readonly:n,onFocus:s}=e;l!=null&&l.disabled.value||l!=null&&l.readonly.value||a||n||(u.value=Z(e.offsetY),o.value=!0,d(s),g("onFocus"))}function me(){const{disabled:a,readonly:n,onBlur:s}=e;l!=null&&l.disabled.value||l!=null&&l.readonly.value||a||n||(U(),d(s),g("onBlur"))}function pe(a){const{disabled:n,readonly:s,multiple:C,onChange:P}=e;if(l!=null&&l.disabled.value||l!=null&&l.readonly.value||n||s)return;const p=z(a);d(e["onUpdate:modelValue"],p),d(P,p),g("onChange"),C||U()}function fe(){const{disabled:a,readonly:n,multiple:s,clearable:C,onClear:P}=e;if(l!=null&&l.disabled.value||l!=null&&l.readonly.value||a||n||!C)return;const p=s?[]:void 0;d(e["onUpdate:modelValue"],p),d(P,p),g("onClear")}function be(a){const{disabled:n,onClick:s}=e;l!=null&&l.disabled.value||n||(d(s,a),g("onClick"))}function he(a){const{disabled:n,readonly:s,modelValue:C,onClose:P}=e;if(l!=null&&l.disabled.value||l!=null&&l.readonly.value||n||s)return;const p=t.find(({label:Y})=>Y.value===a),q=C.filter(Y=>Y!==(p.value.value??p.label.value));d(e["onUpdate:modelValue"],q),d(P,q),g("onClose")}function Ce(){u.value=Z(e.offsetY),o.value=!0,i.value=!0}function U(){o.value=!1,i.value=!1}function W(){return ie(e.rules,e.modelValue)}function j(){d(e["onUpdate:modelValue"],e.multiple?[]:void 0),R()}return{offsetY:u,isFocus:o,showMenu:i,errorMessage:T,formDisabled:l==null?void 0:l.disabled,formReadonly:l==null?void 0:l.readonly,label:N,labels:L,isEmptyModelValue:M,menuEl:te,placement:de,cursor:b,placeholderColor:ue,enableCustomPlaceholder:ce,n:qe,classes:Ge,handleFocus:ve,handleBlur:me,handleClear:fe,handleClick:be,handleClose:he,reset:j,validate:W,resetValidation:R,focus:Ce,blur:U}}});const Xe={key:1};function Ze(e,o,i,$,w,M){const b=y("var-chip"),u=y("var-icon"),h=y("var-field-decorator"),l=y("var-menu"),m=y("var-form-details");return c(),f("div",{class:r(e.n()),onClick:o[3]||(o[3]=(...t)=>e.handleFocus&&e.handleFocus(...t))},[O(l,{"var-select-cover":"","same-width":"","close-on-click-reference":"",show:e.showMenu,"onUpdate:show":o[1]||(o[1]=t=>e.showMenu=t),class:r(e.n("menu")),"popover-class":e.variant==="standard"&&e.hint?e.n("--standard-menu-margin"):void 0,"offset-y":e.offsetY,disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled,placement:e.placement,"default-style":!1,onClickOutside:e.handleBlur},{menu:k(()=>[D("div",{ref:"menuEl",class:r(e.classes(e.n("scroller"),e.n("$-elevation--3")))},[S(e.$slots,"default")],2)]),default:k(()=>[O(h,Oe(Be({value:e.modelValue,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocus:e.isFocus,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,cursor:e.cursor,onClick:e.handleClick,onClear:e.handleClear})),De({"append-icon":k(()=>[S(e.$slots,"append-icon")]),default:k(()=>[D("div",{class:r(e.classes(e.n("select"),[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:H({textAlign:e.textAlign,color:e.textColor})},[D("div",{class:r(e.n("label"))},[e.isEmptyModelValue?K("",!0):S(e.$slots,"selected",{key:0},()=>[e.multiple?(c(),f(J,{key:0},[e.chip?(c(),f("div",{key:0,class:r(e.n("chips"))},[(c(!0),f(J,null,Ne(e.labels,t=>(c(),le(b,{class:r(e.n("chip")),"var-select-cover":"",closeable:"",size:"small",type:e.errorMessage?"danger":void 0,key:t,onClick:o[0]||(o[0]=A(()=>{},["stop"])),onClose:()=>e.handleClose(t)},{default:k(()=>[Ee(B(t),1)]),_:2},1032,["class","type","onClose"]))),128))],2)):(c(),f("div",{key:1,class:r(e.n("values"))},B(e.labels.join(e.separator)),3))],64)):(c(),f("span",Xe,B(e.label),1))])],2),e.enableCustomPlaceholder?(c(),f("span",{key:0,class:r(e.classes(e.n("placeholder"),e.n("$--ellipsis"))),style:H({color:e.placeholderColor})},B(e.placeholder),7)):K("",!0),S(e.$slots,"arrow-icon",{focus:e.showMenu},()=>[O(u,{class:r(e.classes(e.n("arrow"),[e.showMenu,e.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])])],6)]),_:2},[e.$slots["prepend-icon"]?{name:"prepend-icon",fn:k(()=>[S(e.$slots,"prepend-icon")]),key:"0"}:void 0]),1040)]),_:3},8,["show","class","popover-class","offset-y","disabled","placement","onClickOutside"]),O(m,{"error-message":e.errorMessage,onClick:o[2]||(o[2]=A(()=>{},["stop"]))},null,8,["error-message"])],2)}const _e=ee(Je,[["render",Ze]]);ae(_e);function xe(){const{index:e,parentProvider:o,bindParent:i}=Te(se);return i||ne("Option","<var-option/> must in <var-select/>"),{index:e,select:o,bindSelect:i}}const el={label:{},value:{},disabled:Boolean},{name:ll,n:ol,classes:al}=oe("option"),nl=_({name:ll,directives:{Ripple:Ue,Hover:Ye},components:{VarCheckbox:Re,VarHoverOverlay:Ae},props:el,setup(e){const o=F(!1),i=v(()=>o.value),$=v(()=>e.label),w=v(()=>e.value),{select:M,bindSelect:b}=xe(),{multiple:u,focusColor:h,onSelect:l,computeLabel:m}=M,{hovering:t,handleHovering:I}=Ke(),N={label:$,value:w,selected:i,sync:z};x([()=>e.label,()=>e.value],m),b(N);function L(){e.disabled||E()}function E(){u.value&&(o.value=!o.value),l(N)}function z(T){o.value=T}return{optionSelected:o,multiple:u,focusColor:h,hovering:t,n:ol,classes:al,handleHovering:I,handleClick:L,handleSelect:E}}});function sl(e,o,i,$,w,M){const b=y("var-checkbox"),u=y("var-hover-overlay"),h=X("ripple"),l=X("hover");return He((c(),f("div",{class:r(e.classes(e.n(),e.n("$--box"),[e.optionSelected,e.n("--selected-color")],[e.disabled,e.n("--disabled")])),style:H({color:e.optionSelected?e.focusColor:void 0}),onClick:o[2]||(o[2]=(...m)=>e.handleClick&&e.handleClick(...m))},[D("div",{class:r(e.classes(e.n("cover"),[e.optionSelected,e.n("--selected-background")])),style:H({background:e.optionSelected?e.focusColor:void 0})},null,6),e.multiple?(c(),le(b,{key:0,ref:"checkbox",modelValue:e.optionSelected,"onUpdate:modelValue":o[0]||(o[0]=m=>e.optionSelected=m),"checked-color":e.focusColor,disabled:e.disabled,onClick:o[1]||(o[1]=A(()=>{},["stop"])),onChange:e.handleSelect},null,8,["modelValue","checked-color","disabled","onChange"])):K("",!0),S(e.$slots,"default",{},()=>[D("div",{class:r(e.classes(e.n("text"),e.n("$--ellipsis")))},B(e.label),3)]),O(u,{hovering:e.hovering&&!e.disabled},null,8,["hovering"])],6)),[[h,{disabled:e.disabled}],[l,e.handleHovering,"desktop"]])}const rl=ee(nl,[["render",sl]]);ae(rl);export{rl as O,_e as S};
