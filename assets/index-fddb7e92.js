import{a4 as v,d as re,r as k,D as J,G as K,ah as me,b2 as F,_ as de,e as B,m as O,p as P,x as C,y as Z,N as ee,O as ue,R as D,t as x,W as ne,aO as pe,b as Ve,q as N,w as E,f as Ne,T as Ae,F as Pe,al as Re,U as w,Q as Y}from"./index-ba2bae36.js";import{d as ie,c as ce,f as Be,a as se,w as De}from"./components-b4bea23d.js";import{p as te}from"./shared-104f51c5.js";import{p as ze,u as Le,b as fe,_ as Oe,c as je,a as Fe}from"./index-bcc640ab.js";import{d as qe}from"./index-d8fbf18c.js";import{A as W}from"./appType-18c8b942.js";const R=["12","1","2","3","4","5","6","7","8","9","10","11"],p=["00","13","14","15","16","17","18","19","20","21","22","23"],le=["00","05","10","15","20","25","30","35","40","45","50","55"],Ee={modelValue:String,elevation:{type:[Boolean,Number,String],default:!1},hint:String,color:String,headerColor:String,titleColor:String,format:{type:String,default:"ampm"},allowedTime:Object,min:String,max:String,useSeconds:Boolean,readonly:Boolean,"onUpdate:modelValue":ie(),onChange:ie()},ve=(e,t)=>e==="24hr"||t==="am",oe=(e,t,T)=>{const d=R.findIndex(u=>v(u)===v(T)),f=ve(e,t)?T:p[d];return{hourStr:f,hourNum:v(f)}},V=e=>{const[t,T,d]=e.split(":");return{hour:v(t),minute:v(T),second:v(d)}},he=e=>{var z,L;const{time:t,format:T,ampm:d,hour:f,max:u,min:o,disableHour:r}=e,{hourStr:j,hourNum:A}=oe(T,d,f);let M=!1,U=!1;if(r.includes(j))return!0;if(u&&!o){const{hour:g,minute:n}=V(u);M=g===A&&t>n}if(!u&&o){const{hour:g,minute:n}=V(o);M=g===A&&t<n}if(u&&o){const{hour:g,minute:n}=V(u),{hour:a,minute:l}=V(o);M=a===A&&t<l||g===A&&t>n}return(z=e.allowedTime)!=null&&z.minutes&&(U=(L=e.allowedTime)==null?void 0:L.minutes(t)),M||U},ge=e=>{var L,g;const{time:t,format:T,ampm:d,hour:f,minute:u,max:o,min:r,disableHour:j}=e,{hourStr:A,hourNum:M}=oe(T,d,f);let U=!1,z=!1;if(j.includes(A))return!0;if(o&&!r){const{hour:n,minute:a,second:l}=V(o);U=n===M&&a<u||a===u&&t>l}if(!o&&r){const{hour:n,minute:a,second:l}=V(r);U=n===M&&a>u||a===u&&t>l}if(o&&r){const{hour:n,minute:a,second:l}=V(o),{hour:s,minute:y,second:H}=V(r);U=n===M&&a<u||s===M&&y>u||n===M&&a===u&&t>l||s===M&&y===u&&t<H}return(L=e.allowedTime)!=null&&L.seconds&&(z=(g=e.allowedTime)==null?void 0:g.seconds(t)),U||z},{n:Xe,classes:Ye}=ce("time-picker"),We=re({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,{emit:t}){const T=k(null),d=k([]),f=k([]),u=J(()=>({transform:`rotate(${v(e.rad)}deg)`,height:e.isInner&&e.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:A(),borderColor:A()})),o=J(()=>{if(e.rad===void 0)return;const n=e.rad/30;return n>=0?n:n+12}),r=J(()=>e.type==="hour"?R:le),j=(n,a)=>{n=n??(e.type==="minute"?e.time.minute:e.time.second);const l=e.type==="minute"?he:ge,s={time:v(n),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:v(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:d.value};return a&&e.type==="minute"&&Reflect.deleteProperty(s,"minute"),l(s)},A=()=>{if(o.value===void 0)return e.color;const n=e.isInner?p[o.value]:r.value[o.value];return r.value===le?j()?"#bdbdbd":e.color:U(n)?"#bdbdbd":e.color},M=(n,a)=>a?o.value===n&&e.isInner:o.value===n&&(!e.isInner||e.type!=="hour"),U=n=>{if(e.type==="hour"){if(ve(e.format,e.ampm))return d.value.includes(n);const a=R.findIndex(l=>l===n);return f.value.includes(a)}return j(n,!0)},z=(n,a,l)=>{const s=2*Math.PI/12*n-Math.PI/2,y=50*(1+Math.cos(s)),H=50*(1+Math.sin(s)),h=()=>M(n,l)?U(a)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:I,color:_}=h();return{left:`${y}%`,top:`${H}%`,backgroundColor:I,color:_}},L=()=>{const{width:n,height:a}=me(T.value);return{width:n,height:a}},g=()=>{if(o.value===void 0)return;const n=e.ampm==="am"?R:p;return te(n[o.value],2,"0")};return K([o,()=>e.isInner],([n,a],[l,s])=>{if(n===l&&a===s||e.type!=="hour"||o.value===void 0)return;const H=a?p[o.value]:g(),h=e.useSeconds?`:${e.time.second}`:"",I=`${H}:${e.time.minute}${h}`;e.preventNextUpdate||t("update",I),t("change-prevent-update")}),K(()=>e.rad,(n,a)=>{if(e.type==="hour"||n===void 0||a===void 0)return;const l=n/6>=0?n/6:n/6+60,s=a/6>=0?a/6:a/6+60;if(l===s)return;let y;const{hourStr:H}=oe(e.format,e.ampm,e.time.hour);if(e.type==="minute"){const h=F().minute(l).format("mm"),I=e.useSeconds?`:${e.time.second}`:"";y=`${H}:${h}${I}`}if(e.type==="second"){const h=F().second(l).format("ss"),I=e.useSeconds?`:${h}`:"";y=`${H}:${e.time.minute}${I}`}t("update",y)}),K([()=>e.max,()=>e.min,()=>e.allowedTime],([n,a,l])=>{if(d.value=[],n&&!a){const{hour:s}=V(n),y=R.filter(h=>v(h)>s),H=p.filter(h=>v(h)>s);d.value=[...y,...H]}if(!n&&a){const{hour:s}=V(a),y=R.filter(h=>v(h)<s),H=p.filter(h=>v(h)<s);d.value=[...y,...H]}if(n&&a){const{hour:s}=V(n),{hour:y}=V(a),H=R.filter(I=>v(I)<y||v(I)>s),h=p.filter(I=>v(I)<y||v(I)>s);d.value=[...H,...h]}if(l!=null&&l.hours){const{hours:s}=l,y=R.filter(h=>!s(v(h))),H=p.filter(h=>!s(v(h)));d.value=[...new Set([...d.value,...y,...H])]}f.value=d.value.map(s=>p.findIndex(y=>s===y)).filter(s=>s>=0)},{immediate:!0}),{n:Xe,classes:Ye,hours24:p,timeScales:r,inner:T,handStyle:u,disableHour:d,isActive:M,isDisable:U,getSize:L,getStyle:z,activeItemIndex:o}}});function Ge(e,t,T,d,f,u){return B(),O("div",{class:C(e.n("clock"))},[P("div",{class:C(e.n("clock-hand")),style:Z(e.handStyle)},null,6),(B(!0),O(ee,null,ue(e.timeScales,(o,r)=>(B(),O("div",{class:C(e.classes(e.n("clock-item"),[e.isActive(r,!1),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:Z(e.getStyle(r,o,!1))},D(o),7))),128)),e.format==="24hr"&&e.type==="hour"?(B(),O("div",{key:0,class:C(e.n("clock-inner")),ref:"inner"},[(B(!0),O(ee,null,ue(e.hours24,(o,r)=>(B(),O("div",{class:C(e.classes(e.n("clock-item"),[e.isActive(r,!0),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:Z(e.getStyle(r,o,!0))},D(o),7))),128))],2)):x("",!0)],2)}const Qe=de(We,[["render",Ge]]),{name:Je,n:Ke,classes:Ze}=ce("time-picker"),xe=re({name:Je,components:{Clock:Qe},props:Ee,setup(e){const t=k(null),T=k(null),d=k(null),f=k(!1),u=k(!1),o=k(!1),r=k(!1),j=k(!1),A=k(!1),M=k(!1),U=k(0),z=k(0),L=k(),g=k("hour"),n=k("am"),a=k({hour:"00",minute:"00",second:"00"}),l=ne({x:0,y:0}),s=ne({x:[],y:[]}),y=J(()=>g.value==="hour"?L.value:g.value==="minute"?U.value:z.value);K(()=>e.modelValue,i=>{if(i){const{hour:m,minute:c,second:b}=V(i),$=F().hour(m).format("hh"),S=F().hour(m).format("HH"),q=F().minute(c).format("mm"),Q=F().second(b).format("ss");L.value=($==="12"?0:v($))*30,U.value=v(q)*6,z.value=v(Q)*6,a.value=Se(i),e.format!=="24hr"&&(n.value=te(`${m}`,2,"0")===S&&p.includes(S)?"pm":"am"),f.value=e.format==="24hr"&&p.includes(S)}},{immediate:!0});function H(i){se(e["onUpdate:modelValue"],i),se(e.onChange,i)}function h(i){return i*57.29577951308232}function I(i){r.value=!1,M.value=!1,g.value=i}function _(i){const{disableHour:m}=d.value,c=R.findIndex(S=>v(S)===v(a.value.hour)),b=i==="am"?R:p;return[...b.slice(c),...b.slice(0,c)].find((S,q)=>(u.value=q!==0,!m.includes(S)))}function be(i){if(e.readonly)return;n.value=i;const m=_(i);if(!m)return;const c=e.useSeconds?`:${a.value.second}`:"",b=`${te(m,2,"0")}:${a.value.minute}${c}`;H(b)}function ae(i,m){const c=i>=s.x[0]&&i<=s.x[1],b=m>=s.y[0]&&m<=s.y[1];return c&&b}function Se(i){const m=e.format==="24hr"?"HH":"hh",{hour:c,minute:b,second:$}=V(i);return{hour:F().hour(c).format(m),minute:F().minute(b).format("mm"),second:F().second($).format("ss")}}function He(i){const m=i/30;return m>=0?m:m+12}function ke(){const{width:i,height:m}=d.value.getSize(),c=l.x-i/2-8,b=l.x+i/2+8,$=l.y-m/2-8,S=l.y+m/2+8;return{rangeXMin:c,rangeXMax:b,rangeYMin:$,rangeYMax:S}}function Me(i,m,c){const{disableHour:b}=d.value;o.value=ae(i,m);const $=Math.round(c/30)*30+90,S=He($),q=f.value?R[S]:p[S];if(b.includes(q)||(f.value=e.format==="24hr"?ae(i,m):!1),f.value!==o.value)return;const Q=f.value||n.value==="pm"?p[S]:R[S];A.value=b.includes(Q),!A.value&&(L.value=$,r.value=!0)}function $e(i){const{disableHour:m}=d.value,c=Math.round(i/6)*6+90,$={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:n.value,hour:a.value.hour,max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};M.value=he($),!M.value&&(U.value=c,j.value=!0)}function we(i){const{disableHour:m}=d.value,c=Math.round(i/6)*6+90,$={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:n.value,hour:a.value.hour,minute:v(a.value.minute),max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};ge($)||(z.value=c)}function Ce(){const{left:i,top:m,width:c,height:b}=me(t.value);if(l.x=i+c/2,l.y=m+b/2,g.value==="hour"&&e.format==="24hr"){const{rangeXMin:$,rangeXMax:S,rangeYMin:q,rangeYMax:Q}=ke();s.x=[$,S],s.y=[q,Q]}}function Te(i){if(pe(i),e.readonly)return;Ce();const{clientX:m,clientY:c}=i.touches[0],b=m-l.x,$=c-l.y,S=Math.round(h(Math.atan2($,b)));g.value==="hour"?Me(m,c,S):g.value==="minute"?$e(S):we(S)}function Ue(){if(!e.readonly){if(g.value==="hour"&&r.value){g.value="minute";return}g.value==="minute"&&e.useSeconds&&j.value&&(g.value="second")}}function Ie(){u.value=!1}return{getRad:y,time:a,container:t,inner:d,picker:T,isInner:f,type:g,ampm:n,isPreventNextUpdate:u,n:Ke,classes:Ze,pack:ze,moveHand:Te,checkPanel:I,checkAmpm:be,end:Ue,update:H,changePreventUpdate:Ie,formatElevation:Be}}});const _e=P("span",null,":",-1),en={key:0};function nn(e,t,T,d,f,u){const o=Ve("clock");return B(),O("div",{class:C(e.classes(e.n(),e.formatElevation(e.elevation,2))),ref:"picker"},[P("div",{class:C(e.n("title")),style:Z({background:e.titleColor||e.headerColor||e.color})},[P("div",{class:C(e.n("title-hint"))},D(e.hint??e.pack.timePickerHint),3),P("div",{class:C(e.n("title-time-container"))},[P("div",{class:C(e.n("title-time"))},[P("div",{class:C(e.classes(e.n("title-btn"),[e.type==="hour",e.n("title-btn--active")])),onClick:t[0]||(t[0]=r=>e.checkPanel("hour"))},D(e.time.hour),3),_e,P("div",{class:C(e.classes(e.n("title-btn"),[e.type==="minute",e.n("title-btn--active")])),onClick:t[1]||(t[1]=r=>e.checkPanel("minute"))},D(e.time.minute),3),e.useSeconds?(B(),O("span",en,":")):x("",!0),e.useSeconds?(B(),O("div",{key:1,class:C(e.classes(e.n("title-btn"),[e.type==="second",e.n("title-btn--active")])),onClick:t[2]||(t[2]=r=>e.checkPanel("second"))},D(e.time.second),3)):x("",!0)],2),e.format==="ampm"?(B(),O("div",{key:0,class:C(e.n("title-ampm"))},[P("div",{class:C(e.classes(e.n("title-btn"),[e.ampm==="am",e.n("title-btn--active")])),onClick:t[3]||(t[3]=r=>e.checkAmpm("am"))}," AM ",2),P("div",{class:C(e.classes(e.n("title-btn"),[e.ampm==="pm",e.n("title-btn--active")])),onClick:t[4]||(t[4]=r=>e.checkAmpm("pm"))}," PM ",2)],2)):x("",!0)],2)],6),P("div",{class:C(e.n("body"))},[P("div",{class:C(e.n("clock-container")),onTouchstart:t[5]||(t[5]=(...r)=>e.moveHand&&e.moveHand(...r)),onTouchmove:t[6]||(t[6]=(...r)=>e.moveHand&&e.moveHand(...r)),onTouchend:t[7]||(t[7]=(...r)=>e.end&&e.end(...r)),ref:"container"},[N(Ae,{name:`${e.n()}-panel-fade`},{default:E(()=>[(B(),Ne(o,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))]),_:1},8,["name"])],34)],2)],2)}const X=de(xe,[["render",nn]]);De(X);const tn={basicUsage:"基本使用",hour24:"24小时格式",readonly:"只读",timeLimit:"时间限制",custom:"自定义",showSecond:"显示秒"},on={basicUsage:"Basic Usage",hour24:"24hr Format",readonly:"Readonly",timeLimit:"Time Limit",custom:"Custom",showSecond:"Show Seconds"},{add:ye,use:an,pack:G,packs:fn,merge:vn}=Le(),un=e=>{Fe(e),an(e)};fe("zh-CN",Oe);fe("en-US",je);ye("zh-CN",tn);ye("en-US",on);const hn={__name:"index",setup(e){const t=ne({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22"}),T={hours:f=>f%2===0,minutes:f=>f%15!==0,seconds:f=>f%2!==0};function d(f){console.log(f)}return Pe(un),Re(qe),(f,u)=>(B(),O(ee,null,[N(w(W),null,{default:E(()=>[Y(D(w(G).basicUsage),1)]),_:1}),N(w(X),{modelValue:t.date,"onUpdate:modelValue":u[0]||(u[0]=o=>t.date=o)},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(D(w(G).hour24),1)]),_:1}),N(w(X),{modelValue:t.date1,"onUpdate:modelValue":u[1]||(u[1]=o=>t.date1=o),format:"24hr",elevation:""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(D(w(G).showSecond),1)]),_:1}),N(w(X),{modelValue:t.date5,"onUpdate:modelValue":u[2]||(u[2]=o=>t.date5=o),format:"24hr","use-seconds":""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(D(w(G).readonly),1)]),_:1}),N(w(X),{modelValue:t.date2,"onUpdate:modelValue":u[3]||(u[3]=o=>t.date2=o),readonly:"",elevation:""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(D(w(G).timeLimit),1)]),_:1}),N(w(X),{modelValue:t.date3,"onUpdate:modelValue":u[4]||(u[4]=o=>t.date3=o),format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":T},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(D(w(G).custom),1)]),_:1}),N(w(X),{modelValue:t.date4,"onUpdate:modelValue":u[5]||(u[5]=o=>t.date4=o),elevation:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22",onChange:d},null,8,["modelValue"])],64))}};export{hn as default};
