import{S as re}from"./index-7f2a37b7.js";import{a1 as le,a3 as ie,d as Y,r as f,D as b,T as ce,_ as q,e as h,f as de,w as _,p as K,as as ue,v as G,Q as N,R as m,an as fe,G as pe,at as me,b6 as ve,a9 as he,a8 as ye,a4 as H,ai as ge,aj as ke,j as L,a$ as be,a5 as _e,ak as Ce,ah as V,m as g,N as Q,O as W,x as O,y as M,o as Te,F as xe,al as Ie,q as S,U as y}from"./index-ba2bae36.js";import{e as $e}from"./logger-525ef361.js";import{c as J,d as X,a as j,w as Se}from"./components-b4bea23d.js";import{e as Ne}from"./shared-104f51c5.js";import{t as Be,s as we,g as Ae}from"./elements-75b8c791.js";import{C as F}from"./index-f2c276e1.js";import{d as Ee}from"./index-d8fbf18c.js";import{u as ze,b as Z,_ as De,c as Le,a as Oe}from"./index-bcc640ab.js";import"./index-d9f34410.js";import"./index-85ab28c6.js";import"./index-bc58714c.js";/* empty css               */const ee=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Pe(){const{bindChildren:e,length:a,childProviders:t}=le(ee);return{length:a,indexAnchors:t,bindIndexAnchors:e}}function Me(){const{parentProvider:e,index:a,bindParent:t}=ie(ee);return t||$e("IndexAnchor",'You should use this component in "IndexBar"'),{index:a,indexBar:e,bindIndexBar:t}}const Re={index:[Number,String]},{name:Ue,n:He,classes:Ve}=J("index-anchor"),Xe=Y({name:Ue,components:{VarSticky:re},inheritAttrs:!1,props:Re,setup(e){const a=f(0),t=f(!1),c=b(()=>e.index),s=f(null),{index:o,indexBar:d,bindIndexBar:i}=Me(),{active:C,sticky:B,cssMode:v,stickyOffsetTop:w,zIndex:r}=d;i({index:o,name:c,ownTop:a,setOwnTop:A,setDisabled:T});function A(){s.value&&(a.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)}function T(x){t.value=x}return{n:He,classes:Ve,name:c,anchorEl:s,active:C,sticky:B,zIndex:r,disabled:t,cssMode:v,stickyOffsetTop:w,Transition:ce}}});function je(e,a,t,c,s,o){return h(),de(fe(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:_(()=>[K("div",ue({class:e.n()},e.$attrs),[G(e.$slots,"default",{},()=>[N(m(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Fe=q(Xe,[["render",je]]),Ye={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:Boolean,stickyCssMode:Boolean,hideList:Boolean,zIndex:{type:[Number,String],default:1},highlightColor:String,duration:{type:[Number,String],default:0},onClick:X(),onChange:X()},{name:qe,n:Ke,classes:Ge}=J("index-bar"),Qe=Y({name:qe,props:Ye,setup(e){const a=f(""),t=f(null),c=f([]),s=f(),o=b(()=>e.sticky),d=b(()=>e.stickyCssMode||e.cssMode),i=b(()=>Be(e.stickyOffsetTop)),C=b(()=>e.zIndex),{length:B,indexAnchors:v,bindIndexAnchors:w}=Pe();let r=null,k=!1;const A={active:s,sticky:o,cssMode:d,stickyOffsetTop:i,zIndex:C};pe(()=>B.value,async()=>{await L(),v.forEach(({name:n,setOwnTop:l})=>{n.value&&c.value.push(n.value),l()})}),me(async()=>{await te(),ae()}),ve(U),he(()=>{k=!0,U()}),ye(()=>{!k||s.value===void 0||(E({anchorName:s.value,options:{event:!1}}),k=!1)}),w(A);function T(n,l){const u=_e(n)?n.name.value:n;u===s.value||u===void 0||(s.value=u,(l==null?void 0:l.event)!==!1&&j(e.onChange,u))}function x(){if(Ce(r))return 0;const{top:n}=V(r),{scrollTop:l}=r,{top:u}=V(t.value);return l-n+u}function R(){const n=ge(r),l=r===window?document.body.scrollHeight:r.scrollHeight,u=x();v.forEach((p,I)=>{const z=p.ownTop.value,$=n-z+i.value-u,D=I===v.length-1?l:v[I+1].ownTop.value-p.ownTop.value;p.setDisabled(!0),$>=0&&$<D&&a.value===""&&(p.setDisabled(!1),T(p))})}async function E({anchorName:n,manualCall:l=!1,options:u}){if(l&&j(e.onClick,n),n===s.value&&!k)return;const p=v.find(({name:D})=>n===D.value);if(!p)return;const I=x(),z=p.ownTop.value-i.value+I,$=ke(r);a.value=n,T(n,u),await we(r,{left:$,top:z,animation:Ne,duration:H(e.duration)}),await L(),a.value=""}async function te(){await L(),r=Ae(t.value)}function ae(){r.addEventListener("scroll",R)}function U(){r.removeEventListener("scroll",R)}function oe(n,l){be(()=>E({anchorName:n,options:l}))}return{barEl:t,active:s,zIndex:C,anchorNameList:c,n:Ke,classes:Ge,toNumber:H,scrollTo:oe,anchorClick:E}}});const We=["onClick"];function Je(e,a,t,c,s,o){return h(),g("div",{class:O(e.n()),ref:"barEl"},[G(e.$slots,"default"),K("ul",{class:O(e.n("anchor-list")),style:M({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),g(Q,null,W(e.anchorNameList,d=>(h(),g("li",{key:d,class:O(e.classes(e.n("anchor-item"),[e.active===d,e.n("anchor-item--active")])),style:M({color:e.active===d&&e.highlightColor?e.highlightColor:""}),onClick:i=>e.anchorClick({anchorName:d,manualCall:!0})},m(d),15,We))),128))],6)],2)}const ne=q(Qe,[["render",Je]]);Se(ne);const Ze={title:"标题",text:"文本"},en={title:"Title",text:"Text"},{add:se,use:nn,pack:P,packs:gn,merge:kn}=ze(),sn=e=>{Oe(e),nn(e)};Z("zh-CN",De);Z("en-US",Le);se("zh-CN",Ze);se("en-US",en);const tn={class:"index-bar-example-container"},bn={__name:"index",setup(e){const a=f([]),t=f("#e7edf7"),c=f("#2e67ba");Te(()=>{for(let o=0;o<26;o++)a.value.push(String.fromCharCode(65+o))});function s(o){console.log(o)}return xe(sn),Ie(Ee,o=>{t.value=o==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",c.value=o==="darkTheme"?"#3980e8":"#2e67ba"}),(o,d)=>(h(),g("div",tn,[S(y(ne),{onChange:s,duration:"300"},{default:_(()=>[(h(!0),g(Q,null,W(a.value,i=>(h(),g("div",{key:i},[S(Fe,{index:i,class:"index-bar-example-anchor",style:M({background:t.value,color:c.value})},{default:_(()=>[N(m(y(P).title)+" "+m(i),1)]),_:2},1032,["index","style"]),S(y(F),null,{default:_(()=>[N(m(i)+" "+m(y(P).text),1)]),_:2},1024),S(y(F),null,{default:_(()=>[N(m(i)+" "+m(y(P).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{bn as default};
